pico-8 cartridge // http://www.pico-8.com
version 32
__lua__
function _init()
 py=0
 x=64
 y=64
 ox=64
 oy=64
 rectfill(0,0,127,127,12)
 smoke=false
 boost=127
 beam=127
 fire=false
 sfx(0,3)
end

function _update()
 py+=1
 py%=128
 if (btn(5)) fire=true else fire=false
 if (btn(4)) smoke=true else smoke=false
 if (smoke and boost>0) then
  boost-=1
  if (btn(0)) x-=5
  if (btn(1)) x+=5
  if (btn(2)) y-=5
  if (btn(3)) y+=5
  sfx(1,3)
 else 
  if (btn(0)) x-=3
  if (btn(1)) x+=3
  if (btn(2)) y-=3
  if (btn(3)) y+=3
  sfx(0,3)
 end
 if (not smoke and boost<127) boost+=1
 if (fire and beam>0) then
  beam-=1
  sfx(2,2)
 else
  sfx(-2,2)
 end
 if (not fire and beam<127) beam+=1
 if (x<0) x=0
 if (x>120) x=120
 if (y<0) y=0
 if (y>120) y=120
end

function _draw()
 -- erase our sprites
 spr(128,0,oy,16,1)
 spr(192,0,8,16,1)
 spr(208,0,112,16,1)

 -- draw 2 pixels of sky
 rect(0,0,1,127,12)
 -- shift screen left 2px
 for i=1,127 do
  memcpy(0x6000+i*64,0x6001+i*64,64)
 end  

 -- draw smoke cloud
 local z=1
 local s=rnd(4)+1
 if (smoke and boost>0) s=rnd(8)+1
 if (py&1==0) z=-1
 circ(x-4,y+4,s,6)
 circfill(x-4,y+4+z,s,7)

 -- save screen to erase sprites on next pass
 memcpy(0x1000,0x6000+y*64,512)
 memcpy(0x1800,0x6200,512)
 memcpy(0x1a00,0x7c00,512)

 -- draw ship
 local frame=py&7
 spr(2+frame*2,x,y,2,1)
 ox,oy=x,y

 -- draw clouds
 spr(32,py*-1,112,16,2)
 spr(32,128-py,112,16,2)
 spr(32,py*-1,0,16,2,true,true)
 spr(32,128-py,0,16,2,true,true)

 -- draw gauges
 rect(9,1,42,7,3)
 rect(84,1,117,7,2)
-- fillp(0b0101101001011010)
 rectfill(10,2,41,6,0x49)
 rectfill(85,2,116,6,0x49)
 fillp()
 if (boost>0) rectfill(10,2,boost/4+10,6,11)
 if (smoke) print("🅾️boost",12,2,7) else print("🅾️boost",12,2,0)
 if (beam>0) rectfill(85,2,beam/4+85,6,8)
 if (fire) print("❎beam",89,2,7) else print("❎beam",89,2,0)
 if (fire and beam>0) then
   local fr2=py&3
   local pos=x+16
   if (pos<127) then
     spr(64+fr2,pos,y)
     pos+=8
     while (pos<127) do
       spr(80+fr2,pos,y)
       pos+=8
     end
   end
 end

 print("-=] grand cloud alley [=-",15,122,0)
end
__gfx__
0000000000000000d000000000000000d000000000000000d000000000000000d000000000000000d000000000000000d000000000000000d000000000000000
0000000000000000dd00eeeeaaeeed00dd00eeeeeaaeed00dd00eeeeeeaaed00dd00eeeeeeeaad00dd00aeeeeeeead00dd00aaeeeeeeed00dd00eaaeeeeeed00
00700700000000001dd08e8a88e8edd01dd08e8e98e8edd01dd08e8e89e8edd01dd08e8e88a8edd01dd08e8e88e9edd01dd08e8e88e8add01dd09e8e88e8edd0
0007700000000000111d8898888881dd111d8889888881dd111d8888988881dd111d8888898881dd111d8888889881dd111d8888888981dd111d8888888891dd
0007700000000000111188988888811d111188898888811d111188889888811d111188888988811d111188888898811d111188888889811d111188888888911d
00700700000000005150292828828550515028482882855051502829288285505150282848828550515028282982855051502828289285505150282828848550
00000000000000001500422222225500150044222222250015002442222225001500224422222500150022244222250015002222442225001500222224422500
00000000000000005000000000000000500000000000000050000000000000005000000000000000500000000000000050000000000000005000000000000000
d000000000000000d000000000000000aaa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dd00eeaaeeeeed00dd00eeeaaeeeed00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1dd08a8e88e8edd01dd08eae88e8edd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
111d9888888881dd111d8988888881dd000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
111198888888811d111189888888811d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
51502828288295505150482828828550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
15002222224425001500222222244500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
50000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000666660000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000066777776600000000000000000000000000000000000000000666666000000
00000000000000000000000000000000000000000000000000000000000000000677777777760000000666000000000000000000000000000006777777600000
00000000000000000000000000000000000000000000000066666000000666606777777777776000006777660000000000000000000000000067777777760000
00006666666660000006666600000666666000000000006677777660006777767777777777777600067777776000000000000000000000000677777777776000
00667777777776660667777766066777777600000000067777777776067777776777777777777666677777776000000006666666660000006777777777777660
66777777777777676777777777677777777606666600677777777777677777777666777777776777777777777600000067777777776666006777777777777776
77777777777777767777777777767777777767777766777777777776777777777777677777767777777777776666660677777777777777667777777777777777
67777777777777767777777777776777776677777776777666777767777777777777767777677777777777667777776677777777777777766777777777777777
77777777777777677777777777776777667777777777676777667777777777777777767777677777777776777777777677777766777777777667777777777777
67777777777776677777777777776776777777777777767777776777777777777777767777777777777776777777777767776677777777777776777777777777
77777766667766777777777777777667777777777777677777777677777777777777677777777777777767777777777776767777777777777777677777777777
76766677776677777767777777777677777777777776777777777777777777777776777777777777777777777777777777677777777777777777767777777777
77677777777767777776766677777767777777777776777777777767777777777776777777777777777777777777777777677777777777777777767777777777
66777777777776777777777767777776677777777776777777777767777777777767777777777777777777777777777777767777777777777777776777777766
77777777777777677777777776777777767777777777677777777776777777777677777777777777777777777777777777767777777777777777777677777677
00000000000a000000000000000a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0aa000000aa000000aa000000aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
a77aaaaaa77aaaaaa77aaaaaa77aaaaa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7777f77777777f77777777f7777f777f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777f77777777f7777f777f7777f777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
a77aaaaaa77aaaaaa77aaaaaa77aaaaa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0aa000000aa000000aa000000aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000a000000000000000a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f777f7777f777f7777f777f7777f777f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7f777f7777f777f7777f777ff777f777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccccccccccccccccccccccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cceeeeeeeeedcccccccccccccccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dc8e8e88e8eddccccccccccccccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1d8888888881ddcccccccccccccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1188888888811dcccccccccccccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5c28282882855ccccccccccccccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cc2222222225cccccccccccccccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccccccccccccccccccccccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccccccccccccccccccccccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
__sfx__
000100021761008610000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0001000224610186100c6000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000100023e710107100a7000070000700007000070000700007000070000700007000070000700007000070000700007000070000700007000070000700007000070000700007000070000700007000070000700
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0010000018055180551d0551d05518055180551d0551d0550e0550e05513055130550e0550e055130551305500000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
00 0a424344

